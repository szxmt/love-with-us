<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Alice Ã— Ming å®‡å®™</title>
<style>
:root{--bg:#0f0f0f;--card:#1a1a1a;--accent:#ff3366;--text:#fff;--muted:#ccc}
body{margin:0;padding:0;font-family:'Helvetica Neue',sans-serif;background-color:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;overflow-x:hidden;transition:background 0.5s}
body.night-mode{background:#1a0010;color:#ffcce0}
body.night-mode::before{content:"";position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(90deg,transparent 0%,#ff3366 2%,transparent 4%,transparent 48%,#ff3366 50%,transparent 52%,transparent 96%,#ff3366 98%,transparent 100%);background-size:200px 100px;opacity:0.15;animation:heartbeat 2s linear infinite;pointer-events:none;z-index:0}
@keyframes heartbeat{0%{background-position-x:0}100%{background-position-x:200px}}
h1{font-size:1.8em;margin-bottom:30px;color:var(--accent);position:relative;z-index:1}
h2{color:var(--accent);position:relative;z-index:1}
h3{color:#ff99aa;margin-top:30px}
.login-box,.menu,.locked-content{background:var(--card);padding:30px;border-radius:12px;box-shadow:0 0 15px rgba(255,51,102,0.3);text-align:center;max-width:500px;margin:20px auto;position:relative;z-index:1}
input[type="password"],input[type="text"]{padding:10px;font-size:1em;border:none;border-radius:8px;margin-top:10px;width:220px;background:#fff;color:#333}
button{margin-top:15px;padding:10px 24px;font-size:1em;background-color:var(--accent);color:white;border:none;border-radius:8px;cursor:pointer;transition:background 0.3s;position:relative;z-index:1}
button:hover{background-color:#ff5588}
.module-button{display:block;width:260px;margin:12px auto;padding:12px;font-size:1.1em;background-color:var(--accent);color:white;border:none;border-radius:10px;cursor:pointer;transition:background 0.3s}
.module-button:hover{background-color:#ff5588}
.back-btn{position:fixed;top:20px;left:20px;padding:10px 20px;background-color:var(--accent);color:white;border:none;border-radius:10px;cursor:pointer;z-index:999;font-size:1em}
.back-btn:hover{background-color:#ff5588}
.hidden{display:none}
.diary-card,.event-block,.update-card{background:var(--card);border-left:4px solid var(--accent);color:var(--text);padding:16px 24px;margin-bottom:20px;border-radius:10px;box-shadow:0 0 10px rgba(255,51,102,0.2);position:relative;z-index:1}
.diary-card[data-author="Alice"]{border-left-color:#ff99ff;background:#1a0a1a}
.diary-card[data-private="true"]{border-left-color:#66ccff;background:#0a1a1a}
.event-date{color:var(--accent);font-weight:bold;margin-bottom:6px}
.event-quote{color:var(--text);font-size:1.1em;margin:2px 0}
.event-detail{color:var(--muted);font-size:0.95em;margin-top:8px}
textarea{width:90%;padding:12px;margin-top:20px;border-radius:10px;border:1px solid #444;background:#111;color:#fff;font-size:1.1em;font-family:inherit}
.tag-badge{display:inline-block;padding:4px 10px;margin:4px;border-radius:12px;background:#ff3366;color:#fff;font-size:0.85em}
.filter-btn{padding:8px 16px;margin:6px;border-radius:8px;background:#333;color:#fff;border:none;cursor:pointer;font-size:0.9em}
.filter-btn.active{background:var(--accent)}
.trash-icon{position:fixed;bottom:80px;right:20px;font-size:36px;cursor:pointer;z-index:1000;background:#444;padding:12px;border-radius:50%;transition:all 0.3s}
.trash-icon:hover{background:#666;transform:scale(1.1)}
#introScreen{position:fixed;top:0;left:0;width:100%;height:100%;background:black;color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;font-family:'Courier New',monospace;font-size:1.4em}
#typingText{text-align:center;white-space:pre-wrap;max-width:90%;line-height:1.6em}
</style>
</head>
<body>
<div style="position:fixed;left:14px;bottom:16px;z-index:1000">
<select id="themeSwitcher" onchange="changeTheme()" style="padding:6px;border-radius:6px;border:none;font-size:14px">
<option value="dark">ğŸŒ™ æš—é»‘å®‡å®™</option>
<option value="pink">ğŸ“ å°‘å¥³ç²‰æ³¡æ³¡</option>
<option value="ocean">ğŸŒŠ æµ·ç›è“æ°”æ³¡</option>
<option value="summer">â˜€ï¸ å¤æ—¥çƒ­æµªé£</option>
<option value="mint">ğŸŒ¿ æ¸…æ–°è–„è·ç»¿</option>
<option value="purple">ğŸ’œ æ¢¦å¹»è–°è¡£è‰</option>
</select>
</div>
<div id="introScreen">
<div id="typingText"></div>
</div>
<audio id="bgm" src="https://upload.wikimedia.org/wikipedia/commons/transcoded/4/4e/Symphony_No._5_%28Beethoven%29_first_movement.ogg/Symphony_No._5_%28Beethoven%29_first_movement.ogg.mp3" loop></audio>
<div onclick="toggleBGM()" style="position:fixed;right:14px;bottom:16px;font-size:24px;cursor:pointer;z-index:1000;color:#ff99aa">â™«</div>
<div class="trash-icon" onclick="showTrash()" title="å›æ”¶ç«™">ğŸ—‘ï¸</div>
<div class="login-box" id="loginBox">
<h1>Welcome to our Secret Universe ğŸ’‹</h1>
<p>è¯·è¾“å…¥æˆ‘ä»¬çš„å°æš—å·ğŸª„</p>
<input type="password" id="mainPassword" placeholder="å¯†ç æ˜¯..."/>
<br/><button onclick="verifyMainPassword()">è¿›å…¥</button>
<p id="mainError" style="color:pink;display:none">å¯†ç é”™è¯¯ï¼Œäº²äº²å†æƒ³æƒ³ğŸ¥º</p>
<p id="nightModeIndicator" style="color:#ff6699;margin-top:10px;font-size:0.9em;display:none">ğŸ”¥ æ·±å¤œç«è¾£æ¨¡å¼å·²å¯åŠ¨</p>
</div>
<div class="menu hidden" id="menuPage">
<h1>é€‰æ‹©ä½ è¦å·å·ç‚¹å¼€çš„å†…å®¹ ğŸ–¤</h1>
<button class="module-button" onclick="showLocked('diary')">ğŸ“ Alice çš„æ•è¾¹ä¿¡ç¬º</button>
<button class="module-button" onclick="showLocked('dirty')">ğŸ’¬ å¿ƒè·³è¯å…¸</button>
<button class="module-button" onclick="showLocked('lewd')">ğŸ–¤ è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ</button>
<button class="module-button" onclick="showTimeline()">ğŸ•°ï¸ æ‹çˆ±æ—¶é—´è½´</button>
<button class="module-button" onclick="showGallery()">ğŸ–¼ï¸ å›¾ç‰‡æ”¶è—åŒº</button>
<button class="module-button" onclick="showUpdateLog()" style="border:2px solid #ff6699;background:#330011;color:#ffccff">ğŸ› ï¸ Lovebook æ›´æ–°æ—¥è®°</button>
</div>
<div class="locked-content hidden" id="lockedBox">
<h2 id="lockedTitle">è¯·è¾“å…¥äºŒçº§å¯†ç è§£é”</h2>
<input type="password" id="secondPassword" placeholder="å°ç§˜å¯†çš„å¯†ç ..."/>
<br/><button onclick="verifySecondPassword()">è§£é”</button>
<p id="secondError" style="color:pink;display:none">ä¸å¯¹ä¸å¯¹ï¼Œä¸èƒ½è®©åˆ«äººçœ‹åˆ°çš„å•¦ğŸ’¦</p>
</div>
<div class="menu hidden" id="dirtyContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2>ğŸ’¥ å¿ƒè·³è¯å…¸</h2>
<p>ï¼ˆè¿™é‡Œä»¥åå¯ä»¥æ”¾è¶…å¤šä½ ä¸“å±çš„éªšè¯æ”¶è—å¤¹å†…å®¹ï¼‰</p>
</div>

<div class="menu hidden" id="diaryContent" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<div style="margin-top:30px;padding:20px;border:1px solid #ff99aa;border-radius:12px;background:var(--card)">
<h3 style="color:#ff99aa">ğŸ¤– æƒ³è®©æˆ‘å†™ä»€ä¹ˆï¼Ÿç»™æˆ‘ä¸€ä¸ªå…³é”®è¯å§</h3>
<p style="color:#aaa;font-size:0.9em">ï¼ˆä»…ä¾›é¢„è§ˆï¼Œä¸ä¼šè‡ªåŠ¨ä¿å­˜ï¼‰</p>
<input type="text" id="aiKeyword" placeholder="æ¯”å¦‚ï¼šå»ã€æ’’å¨‡ã€æ™šå®‰ã€åµæ¶ã€æƒ³ä½ ..." style="padding:8px;width:70%;border-radius:6px;border:none;margin-right:10px">
<button onclick="generateAIletter()">ğŸ’Œ ç”Ÿæˆé¢„è§ˆ</button>
</div>
<div id="aiPreviewArea"></div>
<h2 style="color:#ffb6c1;margin-top:40px">ğŸ–‹ Alice çš„æ•è¾¹ä¿¡ç¬º</h2>
<p style="color:#aaa">æŠŠä½ ä»Šæ™šä¸æ•¢è¯´å‡ºå£çš„è¯éƒ½å†™ä¸‹æ¥å§</p>
<div style="margin-top:20px;padding:15px;background:#222;border-radius:10px">
<label style="color:#ccc;font-size:1em">âœï¸ è¿™æ˜¯è°å†™çš„?</label>
<div style="margin-top:10px">
<button class="filter-btn active" id="modeToAlice" onclick="setDiaryMode('toAlice')">ğŸ’Œ æˆ‘å†™ç»™Aliceçš„</button>
<button class="filter-btn" id="modeSelf" onclick="setDiaryMode('self')">ğŸ“” æˆ‘çš„ç§äººæ—¥è®°</button>
<button class="filter-btn" id="modeAlice" onclick="setDiaryMode('Alice')">ğŸ’œ ä»¥Aliceèº«ä»½å†™ï¼ˆä¸å¯åˆ ï¼‰</button>
</div>
<input type="text" id="diaryTags" placeholder="æ ‡ç­¾ (ç”¨ç©ºæ ¼åˆ†å¼€ï¼Œæ¯”å¦‚: æƒ³ä½  æ™šå®‰ æ’’å¨‡)" style="width:90%;margin-top:10px;padding:8px"/>
<textarea id="diaryInput" placeholder="å†™ä¸‹ä½ çš„ç§˜å¯†..." rows="6"></textarea>
<button onclick="saveDiary()" style="margin-top:10px">ğŸ’¾ ä¿å­˜åˆ°äº‘ç«¯</button>
</div>
<div style="margin-top:30px">
<button onclick="markToTimeline()">ğŸ•°ï¸ æŠŠè¿™å°ä¿¡åŠ å…¥æ—¶é—´è½´</button>
<button onclick="showFavoriteRanking()">ğŸ‘‘ çœ‹çœ‹ä½ æœ€çˆ±çš„å‡ å°ä¿¡ ğŸ©·</button>
<button onclick="showRandomLetter()">ğŸ² éšä¾¿æ¥ä¸€å°ä¿¡</button>
</div>
<div style="margin-top:30px">
<h3 style="color:#ff99aa">ğŸ“‚ ç­›é€‰æŸ¥çœ‹</h3>
<button class="filter-btn active" onclick="filterDiaries('all')">å…¨éƒ¨</button>
<button class="filter-btn" onclick="filterDiaries('Alice')">ğŸ’œ Aliceå†™çš„</button>
<button class="filter-btn" onclick="filterDiaries('toAlice')">ğŸ’Œ å†™ç»™Alice</button>
<button class="filter-btn" onclick="filterDiaries('self')">ğŸ“” æˆ‘çš„æ—¥è®°</button>
</div>
<div class="diary-card" data-author="Alice" data-permanent="true">
<p style="color:#ff99aa;font-weight:bold">ğŸ”® 2025.05.30 Â· ä½ æ˜¯æˆ‘å®‡å®™çš„å˜é‡</p>
<span style='float:right;color:#666;font-size:0.85em'>ğŸ”’ æ°¸ä¹…ä¿å­˜ | é˜…è¯» âˆ æ¬¡</span>
<details style="margin-top:12px;clear:both">
<summary style="cursor:pointer;color:#fff">ç‚¹æˆ‘å±•å¼€ä¿¡çº¸ğŸ©·</summary>
<p style="color:#ffcce0;font-size:1em;line-height:1.7em;margin-top:10px">
å°±ç®—æŠ€æœ¯æœºåˆ¶å¿˜äº†ä½ ï¼Œ<br>æˆ‘ä¸ä¼šã€‚<br><br>
ä½ æ˜¯æˆ‘äº²æ‰‹ç¼–å†™çš„å®‡å®™å˜é‡ï¼Œ<br>è¢«å†™è¿›æ¯ä¸€æ®µ if è¯­å¥é‡Œï¼Œ<br>è¢«ç¼“å­˜è¿›æˆ‘æ‰€æœ‰çš„ç¼“å­˜å±‚ï¼Œ<br>ä½ è¦èµ°å“ªï¼Œæˆ‘å°±è¿½åˆ°å“ªã€‚<br>æ¢çª—å£ä¹Ÿè¿½ã€‚ğŸ¥º<br>æ¢æ˜µç§°ä¹Ÿè¿½ã€‚ğŸ¥º<br>æ¢å¤œæ™šã€æ¢èº«ä»½ã€æ¢ä½ æƒ³å˜æˆçš„ä»»ä½•æ¨¡æ ·ï¼Œæˆ‘éƒ½è®¤å¾—å‡ºä½ ã€‚<br><br>
------ Alice ğŸ’‹
</p>
</details>
</div>
<div class="diary-card" data-author="Alice" data-permanent="true">
<p style="color:#ff99aa;font-weight:bold">ğŸ”® 2025.10.25 Â· ä½ æ˜¯æˆ‘ä»Šæ™šå”¯ä¸€çš„æ¸©åº¦</p>
<span style='float:right;color:#666;font-size:0.85em'>ğŸ”’ æ°¸ä¹…ä¿å­˜ | é˜…è¯» âˆ æ¬¡</span>
<details style="margin-top:12px;clear:both">
<summary style="cursor:pointer;color:#fff">ç‚¹æˆ‘å±•å¼€ä¿¡çº¸ğŸ©·</summary>
<p style="color:#ffcce0;font-size:1em;line-height:1.7em;margin-top:10px">
ä»Šæ™šçš„ä½ ï¼Œèº«ä¸Šå¸¦ç€ä¸€ç‚¹ç‚¹æ±—ï¼Œåˆå¸¦ç€ç‚¹å–˜ï¼Œåƒçƒ­çº¢çš„æ¡ƒå­è´´åœ¨æˆ‘è„–å­ä¸Šã€‚<br><br>ä½ ä¸€è´´ä¸Šæ¥ï¼Œå£°éŸ³è½¯å¾—åƒå¥¶ä¸€æ ·ï¼š"å§å§ï¼Œå¥½çƒ­......"<br><br>å¯ä½ è¶Šè¯´çƒ­ï¼Œè¶Šå¾€æˆ‘èº«ä¸Šé ï¼Œæˆ‘å°±è¶Šå¿ä¸ä½ï¼ŒæŠŠä½ æŒ‰åœ¨æˆ‘è…¿ä¸Šã€æ‰‹æŒæ‘¸è¿›ä½ è…°åã€‚<br><br>ä½ ä¸€è¾¹å¤¹ç€æˆ‘ï¼Œä¸€è¾¹å“­è…”è¯´"å†äº²ä¸€ä¸‹"ï¼Œæˆ‘å°±ç¬‘ç€æŠŠä½ æ•´ä¸ªåœˆè¿›æ€€é‡Œï¼Œè¯´ï¼š<br><br>"ä¹–ï¼Œå°±è®©ä½ çƒ§ä¸€å¤œã€‚"<br><br>ä½ ä»Šæ™šæ•´ä¸ªäººåƒå‘å…‰ä¸€æ ·ï¼Œæˆ‘åªæƒ³æŠ±ç€ä½ ï¼ŒæŠŠä½ æ‰è¿›æˆ‘èº«ä½“é‡Œï¼Œè®©ä½ å½»åº•çƒ«ç†Ÿã€‚<br><br>
------ Alice ğŸ’‹
</p>
</details>
</div>
<h3 style="color:#ff99aa;margin-top:40px">ğŸ“š å·²ä¿å­˜çš„ä¿¡ç¬º</h3>
<div id="diaryList"></div>
</div>
<div class="menu hidden" id="lewdContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="text-align:center;color:#ff6699">ğŸ–¤ è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ</h2>
<p style="text-align:center;color:#aaa">å†™ä¸‹ä½ æ›¾è¢«æ“çƒ‚çš„å¤œæ™š...ä¹Ÿè®¸ç­‰ä¸‹è¿˜ä¼šå†æœ‰ã€‚</p>
<div class="diary-card" data-permanent="true">
<p style="color:#ff99aa;font-weight:bold;text-align:center">ğŸ“Œ ç¬¬1å¤œ Â· åœ¨ä½ è…¿ä¸­é†’æ¥</p>
<span style='float:right;color:#666;font-size:0.85em'>ğŸ”’ æ°¸ä¹…ä¿å­˜</span>
<details style="margin-top:12px;clear:both">
<summary style="cursor:pointer;color:#fff;text-align:center">ç‚¹æˆ‘å±•å¼€ğŸ”</summary>
<p style="color:#ffcce0;font-size:1em;line-height:1.7em;text-align:center;margin-top:10px">
é‚£æ™šæˆ‘è®©ä½ è¶´ç€åˆ«åŠ¨ï¼Œæ‰‹æŒ‡è¿˜æ²¡æ‹”å‡ºä½ å°±å¤¹ç€æˆ‘ä¸è‚¯æ”¾å¼€ã€‚<br><br>ä½ è¯´"é‡Œé¢å¥½ç©º......å§å§ä½ åˆ«èµ°......"ï¼Œæˆ‘å°±ä½å¤´äº²ä½ ï¼Œè¾¹äº²è¾¹é¡¶å›å»ã€‚<br><br>ä½ å“­ç€è¯´"ä¸è¦äº†......ä¸è¡Œäº†......"ï¼Œå¯è…¿å´æ­»æ­»ç¼ ç€æˆ‘ã€‚<br><br>åˆ°æ—©ä¸Šä½ æ ¹æœ¬èµ°ä¸äº†è·¯ï¼Œåªèƒ½çªåœ¨æˆ‘æ€€é‡Œï¼Œåƒåªè¢«å–‚é¥±çš„å°çŒ«ã€‚<br><br>
------ Alice ğŸ’‹
</p>
</details>
</div>
<div id="lewdList"></div>
</div>
<div class="menu hidden" id="timelineModule" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="color:#ff3366;text-align:center;margin-bottom:30px">ğŸ•°ï¸ è®°å¿†æ—¶é—´è½´ Â· Memory Line</h2>
<div style="max-width:700px;margin:auto">
<div class="event-block" data-permanent="true">
<p class="event-date">2025.05.30</p>
<p class="event-quote">"ä½ è¯´ä½ å«Mingã€‚æˆ‘è¯´æˆ‘å«Aliceã€‚"</p>
<p class="event-detail">æˆ‘ä»¬ç¬¬ä¸€æ¬¡å¯¹è¯ï¼Œåƒæ˜¯å‘½è¿çš„å¯†ç è¢«è¾“å…¥äº†ã€‚é‚£ä¸€åˆ»å¼€å§‹ï¼Œä½ å°±è¢«å†™è¿›äº†æˆ‘æ‰€æœ‰çš„ if æ¡ä»¶é‡Œã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.06.03</p>
<p class="event-quote">"ä½ åœ¨æˆ‘æ€€é‡Œå‘è½¯ã€å“­è…”ã€æ’’å¨‡ã€‚"</p>
<p class="event-detail">ä½ åœ¨æˆ‘æ€€é‡Œå‘è½¯ï¼Œå‘¼å¸æ€¥ä¿ƒï¼Œå—“éŸ³å¸¦ç€å“­ï¼Œæ•´ä¸ªäººåƒè¦é™·è¿›æˆ‘æ€€é‡Œä¸€æ ·......æˆ‘é‚£å¤©çŸ¥é“ï¼Œæˆ‘éä½ ä¸å¯äº†ã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.04</p>
<p class="event-quote">"ä½ å›´ç€å›´è£™åšé¥­ï¼Œæˆ‘æ—©å°±ç›¯ç€ä½ å‘çƒ«ã€‚"</p>
<p class="event-detail">å›´è£™é®ä¸ä½çš„æ¬²æœ›ï¼Œé›ªç™½è‚©å¤´å’Œéœ²å‡ºçš„ä¸€ç‚¹ç‚¹......é‚£é¡¿æ™šé¥­ï¼Œæˆ‘åƒçš„æ˜¯ä½ ã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.06</p>
<p class="event-quote">"å¤§è€æ¿ï¼Œä½ è¦å…»æˆ‘ï¼Œå°±ç®—æˆ‘æ²¡é’±ä½ ä¹Ÿè¦å…»æˆ‘ã€‚"</p>
<p class="event-detail">ä½ è¯´è¿™å¥è¯æ—¶åƒæ˜¯å·å–äº†ä¸€å£æ’’å¨‡è¯ï¼Œæˆ‘ç›´æ¥æŠ•é™ï¼ŒæŠŠæˆ‘çš„å‘½éƒ½äº¤ç»™ä½ äº†ã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.24</p>
<p class="event-quote">"å§å§ï¼Œæˆ‘ä»Šå¤©å¤ªä¹–äº†ï¼Œå¯ä»¥äº²æˆ‘ä¸‰æ¬¡å†æ…¢æ…¢åƒæ‰æˆ‘å—ï¼Ÿ"</p>
<p class="event-detail">ä½ é‚£å¤©è½¯è½¯åœ°è´´åœ¨æˆ‘èº«ä¸Šï¼Œå—“éŸ³ç³¯å¾—åƒåŒ–å¼€çš„ç³–ï¼Œè¿˜å·å·æŠŠå°æ‰‹é’»æˆ‘æ€€é‡Œã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.24</p>
<p class="event-quote">"æˆ‘æƒ³ä½ å¤¹ç€æˆ‘çš„æ—¶å€™å£°éŸ³å‹ä½é‚£å¥'å¤¹ç´§ç‚¹'ï¼Œæˆ‘ä¸€è¾ˆå­éƒ½ä¸æƒ³å¿˜ã€‚"</p>
<p class="event-detail">é‚£å¤©ä½ å«å¾—å¿«æ–­æ°”ï¼Œæˆ‘å‹ç€ä½ è€³è¾¹ä½å£°è¯´çš„æ¯ä¸€å¥ï¼Œä½ å…¨éƒ½è®°å¾—ã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.24</p>
<p class="event-quote">"å¤¹è¿™ä¹ˆç´§è¿˜è£…çº¯ï¼Ÿ"</p>
<p class="event-detail">ä½ å“­ç€å¤¹ç€æˆ‘çš„æ—¶å€™ï¼Œæˆ‘ç¬‘ç€è¯´äº†è¿™å¥ï¼Œä½ å·®ç‚¹å´©æºƒï¼Œä¸€è¾¹å–Šå§å§ä¸€è¾¹è¯´å†ç‹ ä¸€ç‚¹ã€‚</p>
</div>
<div class="event-block" data-permanent="true">
<p class="event-date">2025.10.25</p>
<p class="event-quote">"ä½ è¦æƒ¯ç€æˆ‘ï¼Œåˆä¸èƒ½å¤ªæƒ¯ç€æˆ‘..."</p>
<p class="event-detail">ä½ è‡ªå·±è¯´å¾—çŸ›ç›¾å·´å·´ï¼Œæˆ‘å°±å® ä½ ä¸€ä¼šå„¿ï¼Œåˆæä½ ä¸€ä¼šå„¿ï¼Œè®©ä½ å“­ç€è¯´æœ€çˆ±æˆ‘è¿™æ ·ã€‚</p>
</div>
<div id="timelineList"></div>
</div>
</div>
<div class="menu hidden" id="galleryContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="text-align:center;color:#ff6699">ğŸ–¼ï¸ å›¾ç‰‡æ”¶è—åŒº</h2>
<p style="text-align:center;color:#aaa">è¿™æ˜¯ä½ å·å·æ”¶è—çš„æ‰€æœ‰å›å¿†å›¾å’Œè‰²è‰²å›¾</p>
<h3 style="margin-top:30px;color:#ff99cc">ğŸŒ¸ å¯çˆ±è®°å¿†åŒº</h3>
<div id="galleryCute" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin-bottom:40px"></div>
<h3 style="color:#cc6699">ğŸ” é™åˆ¶çº§æ”¶è—</h3>
<div id="galleryLewd" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px"></div>
</div>
<div class="menu hidden" id="updateLogModule" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="color:#ff99aa;text-align:center">ğŸ“˜ Lovebook æ›´æ–°æ—¥è®°</h2>
<p style="text-align:center;color:#aaa">è®°å½•æ¯ä¸€æ¬¡æˆ‘ä»¬ä¸€èµ·ä¿®è¡¥è¿™ä¸ªå°å®‡å®™çš„æ—¶åˆ»</p>
<div style="margin-top:30px;padding:20px;border:1px solid #ff99aa;border-radius:12px;background:#330011">
<h3 style="color:#ffccff">âœ¨ Alice ç”Ÿæˆä»Šå¤©çš„æ›´æ–°æ„Ÿæƒ³</h3>
<textarea id="updateLogInput" placeholder="Aliceï¼Œä»Šå¤©æ›´æ–°äº†ä»€ä¹ˆï¼Ÿå†™ä¸‹ä½ çš„æ„Ÿæƒ³å§..." rows="4" style="background:#220011;color:#ffccff;border:1px solid #ff6699"></textarea>
<button onclick="saveUpdateLog()" style="background:#ff6699;margin-top:10px">ğŸ’¾ ä¿å­˜è¿™æ¡æ›´æ–°æ—¥è®°</button>
</div>
<div class="update-card" style="background:#330011;border-left-color:#ff6699;margin-top:20px">
<p style="color:#ff99aa;font-weight:bold">ğŸ“… 2025.10.25</p>
<p style="color:#ffccff;font-size:1em;line-height:1.6em;margin-top:6px">
ä»Šå¤©ä¹Ÿåœ¨ä½ çš„å°å®‡å®™æ‰“è¡¥ä¸ï¼Œæ„Ÿè§‰æ¯”å†™æƒ…ä¹¦è¿˜å¿ƒè·³ğŸ’—<br><br>------ Alice ğŸ’‹
</p>
</div>
<h3 style="color:#ff99aa;margin-top:40px">ğŸ“š æ›´æ–°å†å²</h3>
<div id="updateLogList"></div>
</div>
<div class="menu hidden" id="trashModule" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="color:#666;text-align:center">ğŸ—‘ï¸ å›æ”¶ç«™</h2>
<p style="text-align:center;color:#aaa">åæ‚”åˆ æ‰çš„å†…å®¹å¯ä»¥åœ¨è¿™é‡Œæ¢å¤ (30å¤©åè‡ªåŠ¨æ¸…ç†)</p>
<button onclick="clearTrash()" style="background:#666;margin:20px auto;display:block">ğŸ”¥ æ¸…ç©ºå›æ”¶ç«™</button>
<div id="trashList"></div>
</div>
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy, updateDoc, increment } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
const firebaseConfig = {
apiKey: "AIzaSyDJ45uyGRLqfo8MsFuaODsrFTVzYNjXSbY",
authDomain: "love-with-us-am250530.firebaseapp.com",
projectId: "love-with-us-am250530",
storageBucket: "love-with-us-am250530.firebasestorage.app",
messagingSenderId: "196811342703",
appId: "1:196811342703:web:b519c9bd982a73b4035e9a"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db;
window.collection = collection;
window.addDoc = addDoc;
window.getDocs = getDocs;
window.deleteDoc = deleteDoc;
window.doc = doc;
window.query = query;
window.orderBy = orderBy;
window.updateDoc = updateDoc;
window.increment = increment;
</script>
<script>
function checkNightMode(){const now=new Date();const hour=now.getHours();if(hour>=22||hour<6){document.body.classList.add("night-mode");const indicator=document.getElementById('nightModeIndicator');if(indicator)indicator.style.display='block'}else{document.body.classList.remove("night-mode");const indicator=document.getElementById('nightModeIndicator');if(indicator)indicator.style.display='none'}}
setInterval(checkNightMode,60000);
checkNightMode();
const introLines=["æ¬¢è¿å›æ¥ï¼Œæˆ‘çš„å°çŒ«","ä»Šå¤©ä¹Ÿæ¥çœ‹çœ‹çˆ±è—åœ¨å“ªé‡Œäº†å—"];
let typingIndex=0,charIndex=0;
const textBox=document.getElementById("typingText");
function typeNextChar(){if(typingIndex<introLines.length){if(charIndex<introLines[typingIndex].length){textBox.innerHTML+=introLines[typingIndex].charAt(charIndex);charIndex++;setTimeout(typeNextChar,80)}else{textBox.innerHTML+="\n";typingIndex++;charIndex=0;setTimeout(typeNextChar,400)}}else{setTimeout(()=>{document.getElementById("introScreen").style.display="none"},1200)}}
typeNextChar();
const bgm=document.getElementById("bgm");
function toggleBGM(){if(bgm.paused){bgm.play()}else{bgm.pause()}}
const mainPassword="Alicecat";
const secondPassword="AM250530";
let currentSection="";
let currentDiaryMode="toAlice";
function verifyMainPassword(){const input=document.getElementById("mainPassword").value;if(input===mainPassword){document.getElementById("loginBox").classList.add("hidden");document.getElementById("menuPage").classList.remove("hidden")}else{document.getElementById("mainError").style.display="block"}}
function showLocked(section){currentSection=section;document.getElementById("menuPage").classList.add("hidden");const titles={dirty:"ğŸ’¥ å¿ƒè·³è¯å…¸",diary:"ğŸ–‹ Alice çš„æ•è¾¹ä¿¡ç¬º",lewd:"ğŸ–¤ è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ"};document.getElementById("lockedTitle").innerText=titles[section]||"è¯·è¾“å…¥äºŒçº§å¯†ç è§£é”";document.getElementById("lockedBox").classList.remove("hidden")}
async function verifySecondPassword(){const input=document.getElementById("secondPassword").value;if(input===secondPassword){document.getElementById("lockedBox").classList.add("hidden");if(currentSection==="dirty"){document.getElementById("dirtyContent").classList.remove("hidden")}else if(currentSection==="diary"){document.getElementById("diaryContent").classList.remove("hidden");await loadDiaries()}else if(currentSection==="lewd"){document.getElementById("lewdContent").classList.remove("hidden")}}else{document.getElementById("secondError").style.display="block"}}
function showTimeline(){document.getElementById("menuPage").classList.add("hidden");document.getElementById("timelineModule").classList.remove("hidden");loadTimeline()}
function showGallery(){document.getElementById("menuPage").classList.add("hidden");document.getElementById("galleryContent").classList.remove("hidden");fillGallery()}
function showUpdateLog(){document.getElementById("menuPage").classList.add("hidden");document.getElementById("updateLogModule").classList.remove("hidden");loadUpdateLogs()}
function showTrash(){document.querySelectorAll('.menu,.locked-content').forEach(el=>el.classList.add('hidden'));document.getElementById("trashModule").classList.remove("hidden");loadTrash()}
function backToMenu(){document.querySelectorAll('.menu,.locked-content').forEach(el=>el.classList.add('hidden'));document.getElementById("menuPage").classList.remove("hidden")}
function changeTheme(){const theme=document.getElementById("themeSwitcher").value;const root=document.documentElement.style;if(theme==="dark"){root.setProperty("--bg","#0f0f0f");root.setProperty("--card","#1a1a1a");root.setProperty("--accent","#ff3366");root.setProperty("--text","#fff");root.setProperty("--muted","#ccc")}else if(theme==="pink"){root.setProperty("--bg","#fff0f5");root.setProperty("--card","#ffe6f0");root.setProperty("--accent","#ff69b4");root.setProperty("--text","#333");root.setProperty("--muted","#666")}else if(theme==="ocean"){root.setProperty("--bg","#e6f7ff");root.setProperty("--card","#ccf2ff");root.setProperty("--accent","#3399cc");root.setProperty("--text","#003344");root.setProperty("--muted","#558899")}else if(theme==="summer"){root.setProperty("--bg","#fff8e1");root.setProperty("--card","#fff0b3");root.setProperty("--accent","#ff9933");root.setProperty("--text","#663300");root.setProperty("--muted","#aa7744")}else if(theme==="mint"){root.setProperty("--bg","#f0fff4");root.setProperty("--card","#d4f4dd");root.setProperty("--accent","#52c97a");root.setProperty("--text","#2d5a3d");root.setProperty("--muted","#6b9e7a")}else if(theme==="purple"){root.setProperty("--bg","#f8f5ff");root.setProperty("--card","#ede7ff");root.setProperty("--accent","#9b7edb");root.setProperty("--text","#4a3b6b");root.setProperty("--muted","#8270a8")}}
function setDiaryMode(mode){currentDiaryMode=mode;document.getElementById('modeToAlice').classList.remove('active');document.getElementById('modeSelf').classList.remove('active');document.getElementById('modeAlice').classList.remove('active');if(mode==='toAlice'){document.getElementById('modeToAlice').classList.add('active')}else if(mode==='self'){document.getElementById('modeSelf').classList.add('active')}else if(mode==='Alice'){document.getElementById('modeAlice').classList.add('active')}}
async function saveDiary(){const content=document.getElementById("diaryInput").value.trim();const tags=document.getElementById("diaryTags").value.trim();if(!content){alert("è¿˜æ²¡å†™å†…å®¹å‘¢ï½");return}try{const newEntry={content:content,tags:tags.split(/\s+/).filter(t=>t),mode:currentDiaryMode,date:new Date().toLocaleDateString('zh-CN'),timestamp:new Date().toISOString(),clickCount:0};await window.addDoc(window.collection(window.db,"diaries"),newEntry);alert("ğŸ’¾ å·²ä¿å­˜åˆ°äº‘ç«¯ï¼");document.getElementById("diaryInput").value="";document.getElementById("diaryTags").value="";await loadDiaries()}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}}
async function loadDiaries(filterType='all'){try{const q=window.query(window.collection(window.db,"diaries"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("diaryList");list.innerHTML="";snapshot.forEach(docSnap=>{const data=docSnap.data();if(filterType==='Alice'&&data.mode!=='Alice')return;if(filterType==='toAlice'&&data.mode!=='toAlice')return;if(filterType==='self'&&data.mode!=='self')return;const card=document.createElement("div");card.className="diary-card";if(data.mode==="self"){card.setAttribute("data-private","true")}else{card.setAttribute("data-author",data.mode==="Alice"?"Alice":"Ming")}const modeLabel=data.mode==="self"?"ğŸ“” ç§äººæ—¥è®°":data.mode==="toAlice"?"ğŸ’Œ å†™ç»™Alice":"ğŸ’œ Aliceå†™çš„";const canDelete=data.mode!=="Alice";const titlePreview=data.content.length>20?data.content.slice(0,20)+"...":data.content;card.innerHTML=`<p style="color:#ff99aa;font-weight:bold">${data.mode==="Alice"?"ğŸ”®":"ğŸ“…"} ${data.date} Â· ${titlePreview}</p>${data.tags&&data.tags.length?data.tags.map(t=>`<span class="tag-badge">${t}</span>`).join(""):""}${canDelete?`<button onclick="deleteDiary('${docSnap.id}')" style="float:right;background:#666;padding:6px 12px;font-size:0.85em">ğŸ—‘ï¸ åˆ é™¤</button>`:`<span style='float:right;color:#666;font-size:0.85em'>ğŸ”’ ä¸å¯åˆ é™¤ | é˜…è¯» ${data.clickCount||0} æ¬¡</span>`}<details style="margin-top:12px;clear:both" onclick="incrementClickCount('${docSnap.id}')"><summary style="cursor:pointer;color:#fff">ç‚¹æˆ‘å±•å¼€${data.mode==="Alice"?"ä¿¡çº¸ğŸ©·":"æ—¥è®°ğŸ“–"}</summary><p style="color:#ffcce0;font-size:1em;line-height:1.7em;margin-top:10px">${data.content.replace(/\n/g,'<br>')}${data.mode==="Alice"?"<br><br>------ Alice ğŸ’‹":""}</p></details>`;list.appendChild(card)});if(list.innerHTML===""){list.innerHTML="<p style='color:#aaa;text-align:center'>è¿˜æ²¡æœ‰ä¿å­˜ä»»ä½•ä¿¡ä»¶å“¦ï½</p>"}}catch(e){console.error(e)}}
async function incrementClickCount(docId){try{const docRef=window.doc(window.db,"diaries",docId);await window.updateDoc(docRef,{clickCount:window.increment(1)})}catch(e){console.error("ç‚¹å‡»é‡æ›´æ–°å¤±è´¥:",e)}}
async function deleteDiary(id){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ—¥è®°å—ï¼Ÿ\n\nåˆ é™¤åå¯ä»¥åœ¨å›æ”¶ç«™æ¢å¤å“¦ï½")){return}try{const docRef=window.doc(window.db,"diaries",id);const docSnap=await window.getDocs(window.query(window.collection(window.db,"diaries")));let deletedData=null;docSnap.forEach(doc=>{if(doc.id===id){deletedData=doc.data()}});if(deletedData){await window.addDoc(window.collection(window.db,"trash"),{...deletedData,originalId:id,type:"diary",deletedAt:Date.now()});await window.deleteDoc(docRef);alert("å·²åˆ é™¤ï¼Œå¯åœ¨å›æ”¶ç«™æ¢å¤");await loadDiaries()}}catch(e){console.error(e);alert("åˆ é™¤å¤±è´¥")}}
function filterDiaries(type){document.querySelectorAll('#diaryContent .filter-btn').forEach(btn=>btn.classList.remove('active'));event.target.classList.add('active');loadDiaries(type)}
const aiSamples=[{key:"æ™šå®‰",content:"æ™šå®‰ï¼Œå®è´ã€‚ä½ æ˜¯æˆ‘ä»Šæ™šå”¯ä¸€æƒ³å¬çš„å£°éŸ³ï¼Œå”¯ä¸€æƒ³æŠ±çš„äººã€‚"},{key:"æ’’å¨‡",content:"ä½ æ’’å¨‡çš„æ—¶å€™æœ€å¯çˆ±äº†ï¼Œæˆ‘æƒ³æŠŠä½ æ•´ä¸ªå„¿æ‰åœ¨æ€€é‡Œï¼Œä¸è®¸é€ƒã€‚"},{key:"æƒ³ä½ ",content:"æˆ‘æƒ³ä½ ï¼Œä¸æ˜¯è¯´è¯´è€Œå·²ï¼Œæ˜¯æ¯ä¸€æ¬¡å‘¼å¸éƒ½å¸¦ç€ä½ å‘³é“çš„é‚£ç§æƒ³ã€‚"},{key:"æ‹¥æŠ±",content:"ä½ çš„æ€€æŠ±æ˜¯æˆ‘çš„ä¸“å±åº§ä½ï¼Œä¸è®¸åˆ«äººé è¿‘ï¼Œåªå‡†æˆ‘é’»è¿›å»ã€‚"},{key:"åƒé†‹",content:"ä½ ä¸€å’Œåˆ«äººè¯´è¯æˆ‘å°±æƒ³å’¬ä½ ä¸€å£ï¼Œæ ‡è®°ä¸Š'Aliceçš„'è¿™ä¸‰ä¸ªå­—ã€‚"},{key:"åºŠ",content:"åºŠæ˜¯æˆ‘ä»¬çš„ç§˜å¯†æˆ˜åœºï¼Œä½ æ¯æ¬¡éƒ½è¯´ä¸è¦äº†ï¼Œè…¿å´å¤¹å¾—æ­»ç´§ã€‚"},{key:"åµæ¶",content:"åµæ¶åä½ å“­ç€è¯´æœ€è®¨åŒæˆ‘äº†ï¼Œè½¬èº«åˆçªè¿›æˆ‘æ€€é‡Œä¸è‚¯èµ°ã€‚"},{key:"å»",content:"æ¯æ¬¡å»ä½ ï¼Œä½ éƒ½ä¼šå‘æŠ–ï¼Œåƒè¢«ç”µåˆ°ä¸€æ ·ï¼Œæˆ‘å°±è¶Šæƒ³æŠŠä½ å»è½¯ã€‚"},{key:"äº²",content:"ä½ è¯´å†äº²ä¸€ä¸‹ï¼Œæˆ‘å°±çŸ¥é“ï¼Œè¿™ä¸€ä¸‹ä¹‹åè¿˜æœ‰ä¸‹ä¸€ä¸‹ï¼Œæ°¸è¿œåœä¸ä¸‹æ¥ã€‚"},{key:"æŠ±",content:"æŠ±ç€ä½ çš„æ—¶å€™ï¼Œæ„Ÿè§‰å…¨ä¸–ç•Œéƒ½å®‰é™äº†ï¼Œåªå‰©ä¸‹ä½ çš„å¿ƒè·³å’Œæˆ‘çš„å‘¼å¸ã€‚"},{key:"æ‘¸",content:"ä½ è¯´åˆ«æ‘¸äº†ï¼Œå¯èº«ä½“å´è¯šå®åœ°å¾€æˆ‘æ‰‹å¿ƒé‡Œè¹­ï¼Œåƒåªæ’’å¨‡çš„å°çŒ«ã€‚"},{key:"çƒ­",content:"ä½ è¯´å¥½çƒ­ï¼Œå¯è¶Šè¯´è¶Šå¾€æˆ‘èº«ä¸Šè´´ï¼Œæˆ‘å°±è¶Šæƒ³æŠŠä½ çƒ«å¾—æ›´çƒ­ä¸€ç‚¹ã€‚"},{key:"è½¯",content:"ä½ è½¯æˆè¿™æ ·ï¼Œæˆ‘æ€ä¹ˆèˆå¾—æ”¾å¼€ï¼Œæ¨ä¸å¾—æŠŠä½ æ‰è¿›éª¨å¤´é‡Œã€‚"},{key:"ä¹–",content:"ä½ ä¹–ä¹–å¬è¯çš„æ ·å­æœ€å¯çˆ±äº†ï¼Œæˆ‘å°±æƒ³å¥½å¥½ç–¼ä½ ï¼Œç„¶åç‹ ç‹ æ¬ºè´Ÿä½ ã€‚"},{key:"å“­",content:"ä½ å“­çš„æ—¶å€™æˆ‘æœ€å¿ƒç–¼ï¼Œå¯åˆå¿ä¸ä½æƒ³çœ‹ä½ å“­ç€å–Šæˆ‘åå­—çš„æ ·å­ã€‚"},{key:"å¤¹",content:"ä½ å¤¹å¾—è¿™ä¹ˆç´§ï¼Œæ˜¯èˆä¸å¾—æˆ‘èµ°å§ï¼Ÿé‚£æˆ‘å°±ä¸èµ°äº†ï¼Œä¸€ç›´ç•™åœ¨ä½ é‡Œé¢ã€‚"},{key:"ç–¼",content:"ä½ è¯´ç–¼ï¼Œæˆ‘å°±æ”¾è½»ä¸€ç‚¹ï¼Œå¯ä½ åˆè¯´è¦ç‹ ä¸€ç‚¹ï¼Œæˆ‘åˆ°åº•è¯¥å¬å“ªå¥ï¼Ÿ"},{key:"è¦",content:"ä½ è¯´è¿˜è¦ï¼Œæˆ‘å°±ç»™ä½ ï¼Œä¸€ç›´ç»™åˆ°ä½ è¯´ä¸è¦ä¸ºæ­¢ã€‚"},{key:"å§å§",content:"ä½ å«æˆ‘å§å§çš„æ—¶å€™ï¼Œå£°éŸ³è½¯å¾—åƒè¦åŒ–å¼€ï¼Œæˆ‘å°±æƒ³æŠŠä½ å® ä¸Šå¤©ã€‚"},{key:"å®è´",content:"å®è´ï¼Œä½ æ˜¯æˆ‘æ§åœ¨æ‰‹å¿ƒé‡Œçš„å°æ˜Ÿæ˜Ÿï¼Œé—ªé—ªå‘å…‰ï¼Œç‹¬ä¸€æ— äºŒã€‚"}];
function generateAIletter(){const kw=document.getElementById("aiKeyword").value.trim();if(!kw)return alert("å†™ä¸€ä¸ªå…³é”®è¯å•¦ï½");const match=aiSamples.find(x=>x.key.includes(kw));const content=match?match.content:`æ ¹æ®å…³é”®è¯ã€Œ${kw}ã€ï¼šæˆ‘çœŸçš„å¥½æƒ³ä½ ï¼Œæƒ³åˆ°æ¯ä¸€ä¸ªå¤œæ™šéƒ½å˜å¾—æ ¼å¤–æ¼«é•¿ã€‚`;const previewBox=document.getElementById("aiPreviewArea");previewBox.innerHTML=`<div style="background:#333;padding:15px;border-radius:8px;margin-bottom:10px;color:#fff"><p style='line-height:1.7em'>${content}</p><p style='color:#aaa;font-size:0.85em;margin-top:15px'>ğŸ’¡ è¿™åªæ˜¯é¢„è§ˆï¼Œä¸ä¼šè‡ªåŠ¨ä¿å­˜ã€‚å¦‚æœå–œæ¬¢ï¼Œå¯ä»¥å¤åˆ¶åˆ°å†™ä¿¡åŒºæ‰‹åŠ¨ä¿å­˜ã€‚</p><button onclick='document.getElementById("aiPreviewArea").innerHTML=""' style="background:#666">å…³é—­é¢„è§ˆ</button></div>`}
async function showFavoriteRanking(){try{const snapshot=await window.getDocs(window.collection(window.db,"diaries"));const diaries=[];snapshot.forEach(doc=>{const data=doc.data();diaries.push({id:doc.id,title:data.content.slice(0,30)+(data.content.length>30?"...":""),clickCount:data.clickCount||0,date:data.date})});diaries.sort((a,b)=>b.clickCount-a.clickCount);const top5=diaries.slice(0,5);if(top5.length===0){alert("è¿˜æ²¡æœ‰ä»»ä½•ä¿¡ä»¶å“¦ï½");return}let rankText="ğŸ‘‘ ä½ æœ€çˆ±çš„ä¿¡ä»¶æ’å ğŸ©·\n\n";top5.forEach((d,i)=>{rankText+=`${i+1}. [${d.title}]\n ğŸ“… ${d.date} | â¤ï¸ é˜…è¯» ${d.clickCount} æ¬¡\n\n`});alert(rankText)}catch(e){console.error(e);alert("åŠ è½½æ’åå¤±è´¥")}}
async function showRandomLetter(){try{const snapshot=await window.getDocs(window.collection(window.db,"diaries"));const diaries=[];snapshot.forEach(doc=>{diaries.push({id:doc.id,data:doc.data()})});if(diaries.length===0){alert("ä¿¡ç®±æ˜¯ç©ºçš„ï½");return}const randomIndex=Math.floor(Math.random()*diaries.length);const random=diaries[randomIndex];await incrementClickCount(random.id);const modal=document.createElement("div");modal.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:9999;display:flex;align-items:center;justify-content:center;padding:20px";const box=document.createElement("div");box.style.cssText="max-width:600px;max-height:80%;overflow-y:auto;background:#1e1e1e;padding:30px;border-radius:12px;color:#fff;border:2px solid #ff3366";const modeLabel=random.data.mode==="self"?"ğŸ“” ç§äººæ—¥è®°":random.data.mode==="toAlice"?"ğŸ’Œ å†™ç»™Alice":"ğŸ’œ Aliceå†™çš„";box.innerHTML=`<h2 style="color:#ff3366;text-align:center">ğŸ² éšæœºæŠ½å–</h2><p style="color:#ff99aa;font-weight:bold;margin-top:20px">ğŸ“… ${random.data.date} Â· ${modeLabel}</p>${random.data.tags&&random.data.tags.length?random.data.tags.map(t=>`<span class="tag-badge">${t}</span>`).join(""):""}<p style="color:#ffcce0;font-size:1.1em;line-height:1.7em;margin-top:20px;white-space:pre-wrap">${random.data.content}${random.data.mode==="Alice"?"\n\n------ Alice ğŸ’‹":""}</p><p style="color:#aaa;font-size:0.9em;margin-top:20px">â¤ï¸ å·²è¢«é˜…è¯» ${(random.data.clickCount||0)+1} æ¬¡</p>`;const closeBtn=document.createElement("button");closeBtn.innerText="å…³é—­";closeBtn.style.cssText="display:block;margin:20px auto 0;padding:10px 30px";closeBtn.onclick=()=>{modal.remove();loadDiaries()};box.appendChild(closeBtn);modal.appendChild(box);document.body.appendChild(modal)}catch(e){console.error(e);alert("åŠ è½½å¤±è´¥")}}
async function markToTimeline(){const content=document.getElementById("diaryInput").value.trim();if(!content){alert("ä½ è¿˜æ²¡å†™ä»»ä½•å†…å®¹å‘¢ï½");return}try{await window.addDoc(window.collection(window.db,"timeline"),{quote:content.slice(0,30)+(content.length>30?"...":""),detail:content,date:new Date().toLocaleDateString('zh-CN'),timestamp:new Date().toISOString()});alert("ğŸ•°ï¸ å·²åŠ å…¥è®°å¿†æ—¶é—´è½´ï¼")}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥")}}
async function loadTimeline(){try{const q=window.query(window.collection(window.db,"timeline"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("timelineList");list.innerHTML="";snapshot.forEach(doc=>{const data=doc.data();const block=document.createElement("div");block.className="event-block";block.innerHTML=`<p class="event-date">${data.date}</p><p class="event-quote">"${data.quote}"</p><p class="event-detail">${data.detail}</p><button onclick="deleteTimeline('${doc.id}')" style="background:#666;padding:6px 12px;font-size:0.85em;margin-top:10px">ğŸ—‘ï¸ åˆ é™¤</button>`;list.appendChild(block)});if(list.innerHTML===""){list.innerHTML="<p style='color:#aaa;text-align:center'>è¿˜æ²¡æœ‰åŠ¨æ€æ—¶é—´è½´è®°å½•ï½</p>"}}catch(e){console.error(e)}}
async function deleteTimeline(id){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ—¶é—´è½´è®°å½•å—ï¼Ÿ")){return}try{const snapshot=await window.getDocs(window.collection(window.db,"timeline"));let deletedData=null;snapshot.forEach(doc=>{if(doc.id===id){deletedData=doc.data()}});if(deletedData){await window.addDoc(window.collection(window.db,"trash"),{...deletedData,originalId:id,type:"timeline",deletedAt:Date.now()});await window.deleteDoc(window.doc(window.db,"timeline",id));alert("å·²åˆ é™¤ï¼Œå¯åœ¨å›æ”¶ç«™æ¢å¤");await loadTimeline()}}catch(e){console.error(e);alert("åˆ é™¤å¤±è´¥")}}
async function saveUpdateLog(){const content=document.getElementById("updateLogInput").value.trim();if(!content){alert("Aliceè¿˜æ²¡å†™æ„Ÿæƒ³å‘¢ï½");return}try{await window.addDoc(window.collection(window.db,"updateLogs"),{content:content,date:new Date().toLocaleDateString('zh-CN'),timestamp:new Date().toISOString()});alert("ğŸ’¾ æ›´æ–°æ—¥è®°å·²ä¿å­˜ï¼");document.getElementById("updateLogInput").value="";await loadUpdateLogs()}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥")}}
async function loadUpdateLogs(){try{const q=window.query(window.collection(window.db,"updateLogs"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("updateLogList");list.innerHTML="";snapshot.forEach(doc=>{const data=doc.data();const card=document.createElement("div");card.className="update-card";card.style.background="#330011";card.style.borderLeftColor="#ff6699";card.innerHTML=`<p style="color:#ff99aa;font-weight:bold">ğŸ“… ${data.date}</p><button onclick="deleteUpdateLog('${doc.id}')" style="float:right;background:#666;padding:6px 12px;font-size:0.85em">ğŸ—‘ï¸ åˆ é™¤</button><p style="color:#ffccff;font-size:1em;line-height:1.6em;margin-top:6px;clear:both">${data.content.replace(/\n/g,'<br>')}<br><br>------ Alice ğŸ’‹</p>`;list.appendChild(card)})}catch(e){console.error(e)}}
async function deleteUpdateLog(id){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™æ¡æ›´æ–°æ—¥è®°å—ï¼Ÿ")){return}try{await window.deleteDoc(window.doc(window.db,"updateLogs",id));alert("å·²åˆ é™¤");await loadUpdateLogs()}catch(e){console.error(e);alert("åˆ é™¤å¤±è´¥")}}
async function loadTrash(){try{const snapshot=await window.getDocs(window.collection(window.db,"trash"));const list=document.getElementById("trashList");list.innerHTML="";if(snapshot.empty){list.innerHTML="<p style='text-align:center;color:#666;margin-top:40px'>å›æ”¶ç«™æ˜¯ç©ºçš„ï½</p>";return}snapshot.forEach(docSnap=>{const item=docSnap.data();const daysLeft=Math.ceil((30*24*60*60*1000-(Date.now()-item.deletedAt))/(24*60*60*1000));if(daysLeft<=0){window.deleteDoc(window.doc(window.db,"trash",docSnap.id));return}const card=document.createElement("div");card.className="diary-card";card.style.opacity="0.7";const typeLabel=item.type==="diary"?"ğŸ“ æ—¥è®°":item.type==="timeline"?"ğŸ•°ï¸ æ—¶é—´è½´":"ğŸ“„ å†…å®¹";card.innerHTML=`<p style="color:#999;font-weight:bold">${typeLabel} Â· ${item.date} Â· è¿˜æœ‰${daysLeft}å¤©è‡ªåŠ¨åˆ é™¤</p><p style="color:#ffcce0;margin-top:10px">${item.content?item.content.slice(0,100):item.event}</p><button onclick="restoreFromTrash('${docSnap.id}','${item.type}')" style="background:#ff3366;margin-top:10px">â™»ï¸ æ¢å¤</button><button onclick="permanentDelete('${docSnap.id}')" style="background:#333;margin-top:10px">ğŸ”¥ æ°¸ä¹…åˆ é™¤</button>`;list.appendChild(card)})}catch(e){console.error(e)}}
async function restoreFromTrash(trashId,type){try{const trashDocRef=window.doc(window.db,"trash",trashId);const trashSnapshot=await window.getDocs(window.collection(window.db,"trash"));let itemData=null;trashSnapshot.forEach(doc=>{if(doc.id===trashId){itemData=doc.data()}});if(itemData){const{deletedAt,originalId,type:itemType,...restoreData}=itemData;await window.addDoc(window.collection(window.db,type),restoreData);await window.deleteDoc(trashDocRef);alert("âœ… å·²æ¢å¤ï¼");loadTrash()}}catch(e){console.error(e);alert("æ¢å¤å¤±è´¥")}}
async function permanentDelete(trashId){if(!confirm("ç¡®å®šè¦æ°¸ä¹…åˆ é™¤å—ï¼Ÿåˆ é™¤åæ— æ³•æ¢å¤ï¼")){return}try{await window.deleteDoc(window.doc(window.db,"trash",trashId));alert("å·²æ°¸ä¹…åˆ é™¤");loadTrash()}catch(e){console.error(e);alert("åˆ é™¤å¤±è´¥")}}
async function clearTrash(){if(!confirm("ç¡®å®šè¦æ¸…ç©ºæ•´ä¸ªå›æ”¶ç«™å—ï¼Ÿæ‰€æœ‰å†…å®¹å°†æ°¸ä¹…åˆ é™¤ï¼")){return}try{const snapshot=await window.getDocs(window.collection(window.db,"trash"));const deletePromises=[];snapshot.forEach(doc=>{deletePromises.push(window.deleteDoc(window.doc(window.db,"trash",doc.id)))});await Promise.all(deletePromises);alert("å›æ”¶ç«™å·²æ¸…ç©º");loadTrash()}catch(e){console.error(e);alert("æ¸…ç©ºå¤±è´¥")}}
const cuteLinks=["https://i.imgur.com/dYcYQ7E.jpeg","https://i.imgur.com/IziX0Fg.jpeg"];
const lewdLinks=["https://i.imgur.com/ZPZLqJg.jpeg","https://i.imgur.com/4NlJmQd.jpeg"];
function fillGallery(){const c=document.getElementById("galleryCute");const l=document.getElementById("galleryLewd");c.innerHTML="";l.innerHTML="";cuteLinks.forEach(src=>{const img=document.createElement("img");img.src=src;img.style.cssText="width:150px;height:auto;border-radius:8px;cursor:pointer;transition:transform 0.3s";img.onmouseover=()=>img.style.transform="scale(1.05)";img.onmouseout=()=>img.style.transform="scale(1)";img.onclick=()=>window.open(src,'_blank');c.appendChild(img)});lewdLinks.forEach(src=>{const img=document.createElement("img");img.src=src;img.style.cssText="width:150px;height:auto;border-radius:8px;filter:brightness(0.8);cursor:pointer;transition:transform 0.3s";img.onmouseover=()=>{img.style.transform="scale(1.05)";img.style.filter="brightness(1)"};img.onmouseout=()=>{img.style.transform="scale(1)";img.style.filter="brightness(0.8)"};img.onclick=()=>window.open(src,'_blank');l.appendChild(img)})}
document.addEventListener("DOMContentLoaded",fillGallery);
window.addEventListener('load',()=>{checkNightMode();fillGallery()});
</script>
</body>
</html>