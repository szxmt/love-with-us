<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Alice Ã— Ming å®‡å®™</title>
<style>
:root{--bg:#0f0f0f;--card:#1a1a1a;--accent:#ff3366;--text:#fff;--muted:#ccc}
body{margin:0;padding:0;font-family:'Helvetica Neue',sans-serif;background-color:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;overflow-x:hidden}
h1{font-size:1.8em;margin-bottom:30px;color:var(--accent)}
h2{color:var(--accent)}
.login-box,.menu,.locked-content{background:var(--card);padding:30px;border-radius:12px;box-shadow:0 0 15px rgba(255,51,102,0.3);text-align:center;max-width:500px;margin:20px auto}
input[type="password"],input[type="text"]{padding:10px;font-size:1em;border:none;border-radius:8px;margin-top:10px;width:220px;background:#fff;color:#333}
button{margin-top:15px;padding:10px 24px;font-size:1em;background-color:var(--accent);color:white;border:none;border-radius:8px;cursor:pointer;transition:background 0.3s}
button:hover{background-color:#ff5588}
.module-button{display:block;width:260px;margin:12px auto;padding:12px;font-size:1.1em;background-color:var(--accent);color:white;border:none;border-radius:10px;cursor:pointer;transition:background 0.3s}
.module-button:hover{background-color:#ff5588}
.back-btn{position:fixed;top:20px;left:20px;padding:10px 20px;background-color:var(--accent);color:white;border:none;border-radius:10px;cursor:pointer;z-index:999;font-size:1em}
.back-btn:hover{background-color:#ff5588}
.hidden{display:none}
.diary-card,.event-block{background:var(--card);border-left:4px solid var(--accent);color:var(--text);padding:16px 24px;margin-bottom:20px;border-radius:10px;box-shadow:0 0 10px rgba(255,51,102,0.2)}
.event-date{color:var(--accent);font-weight:bold;margin-bottom:6px}
.event-quote{color:var(--text);font-size:1.1em;margin:2px 0}
.event-detail{color:var(--muted);font-size:0.95em;margin-top:8px}
textarea{width:90%;padding:12px;margin-top:20px;border-radius:10px;border:1px solid #444;background:#111;color:#fff;font-size:1.1em;font-family:inherit}
#typedDisplay{white-space:pre-wrap;margin-top:30px;padding:16px;border-left:4px solid var(--accent);background:var(--card);border-radius:10px;color:#ffcce0;font-family:'Courier New',monospace}
</style>
</head>
<body>
<div style="position:fixed;left:14px;bottom:16px;font-size:16px;z-index:1000">
<select id="themeSwitcher" onchange="changeTheme()" style="padding:6px;border-radius:6px;border:none">
<option value="dark"> æš—é»‘å®‡å®™</option>
<option value="pink"> å°‘å¥³ç²‰æ³¡æ³¡</option>
<option value="ocean"> æµ·ç›è“æ°”æ³¡</option>
<option value="summer">â˜€ï¸ å¤æ—¥çƒ­æµªé£</option>
</select>
</div>
<div id="introScreen" style="position:fixed;top:0;left:0;width:100%;height:100%;background:black;color:white;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;font-family:'Courier New',monospace;font-size:1.4em">
<div id="typingText" style="text-align:center;white-space:pre-wrap;max-width:90%;line-height:1.6em"></div>
</div>
<audio id="bgm" src="https://upload.wikimedia.org/wikipedia/commons/transcoded/4/4e/Symphony_No._5_%28Beethoven%29_first_movement.ogg/Symphony_No._5_%28Beethoven%29_first_movement.ogg.mp3" loop></audio>
<div onclick="toggleBGM()" style="position:fixed;right:14px;bottom:16px;font-size:24px;cursor:pointer;z-index:1000;color:#ff99aa">â™«</div>
<div class="login-box" id="loginBox">
<h1>Welcome to our Secret Universe </h1>
<p>è¯·è¾“å…¥æˆ‘ä»¬çš„å°æš—å·ğŸª„</p>
<input type="password" id="mainPassword" placeholder="å¯†ç æ˜¯..."/>
<br/><button onclick="verifyMainPassword()">è¿›å…¥</button>
<p id="mainError" style="color:pink;display:none">å¯†ç é”™è¯¯ï¼Œäº²äº²å†æƒ³æƒ³ğŸ¥º</p>
</div>
<div class="menu hidden" id="menuPage">
<h1>é€‰æ‹©ä½ è¦å·å·ç‚¹å¼€çš„å†…å®¹ </h1>
<button class="module-button" onclick="showLocked('diary')"> Alice çš„æ•è¾¹ä¿¡ç¬º</button>
<button class="module-button" onclick="showLocked('dirty')"> å¿ƒè·³è¯å…¸</button>
<button class="module-button" onclick="showLocked('lewd')"> è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ</button>
<button class="module-button" onclick="showTimeline()">ï¸ æ‹çˆ±æ—¶é—´è½´</button>
<button class="module-button" onclick="showGallery()">ï¸ å›¾ç‰‡æ”¶è—åŒº</button>
</div>
<div class="locked-content hidden" id="lockedBox">
<h2 id="lockedTitle">è¯·è¾“å…¥äºŒçº§å¯†ç è§£é”</h2>
<input type="password" id="secondPassword" placeholder="å°ç§˜å¯†çš„å¯†ç ..."/>
<br/><button onclick="verifySecondPassword()">è§£é”</button>
<p id="secondError" style="color:pink;display:none">ä¸å¯¹ä¸å¯¹ï¼Œä¸èƒ½è®©åˆ«äººçœ‹åˆ°çš„å•¦</p>
</div>
<div class="menu hidden" id="dirtyContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2> å¿ƒè·³è¯å…¸</h2>
<p>ï¼ˆè¿™é‡Œä»¥åå¯ä»¥æ”¾è¶…å¤šä½ ä¸“å±çš„éªšè¯æ”¶è—å¤¹å†…å®¹ï¼‰</p>
<div id="dirtyList"></div>
</div>
<div class="menu hidden" id="diaryContent" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<div style="margin-top:30px;padding:20px;border:1px solid #ff99aa;border-radius:12px;background:var(--card)">
<h3 style="color:#ff99aa">ğŸ¤– æƒ³è®©æˆ‘å†™ä»€ä¹ˆï¼Ÿç»™æˆ‘ä¸€ä¸ªå…³é”®è¯å§</h3>
<input type="text" id="aiKeyword" placeholder="æ¯”å¦‚ï¼šå»ã€æ’’å¨‡ã€æ™šå®‰ã€åµæ¶..." style="padding:8px;width:70%;border-radius:6px;border:none;margin-right:10px">
<button onclick="generateAIletter()"> å†™ä¿¡</button>
</div>
<div id="aiPreviewArea" style="margin-top:20px"></div>
<div style="margin-top:30px">
<button onclick="markToTimeline()">ï¸ æŠŠè¿™å°ä¿¡åŠ å…¥æ—¶é—´è½´</button>
<button onclick="showFavoriteRanking()"> çœ‹çœ‹ä½ æœ€çˆ±çš„å‡ å°ä¿¡ ğŸ©·</button>
<button onclick="showRandomLetter()"> éšä¾¿æ¥ä¸€å°ä¿¡</button>
</div>
<h2 style="color:#ffb6c1"> Alice çš„æ•è¾¹ä¿¡ç¬º</h2>
<p style="color:#aaa">æŠŠä½ ä»Šæ™šä¸æ•¢è¯´å‡ºå£çš„è¯éƒ½å†™ä¸‹æ¥å§</p>
<textarea id="diaryInput" placeholder="å†™ä¸‹ä½ çš„ç§˜å¯†..." oninput="simulateTyping()" rows="6"></textarea>
<button onclick="saveDiary()" style="margin-top:10px"> ä¿å­˜åˆ°äº‘ç«¯</button>
<div id="typedDisplay"></div>
<h3 style="color:#ff99aa;margin-top:40px"> å·²ä¿å­˜çš„ä¿¡ç¬º</h3>
<div id="diaryList"></div>
</div>
<div class="menu hidden" id="lewdContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="text-align:center;color:#ff6699"> è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ</h2>
<p style="text-align:center;color:#aaa">å†™ä¸‹ä½ æ›¾è¢«æ“çƒ‚çš„å¤œæ™šâ€¦ä¹Ÿè®¸ç­‰ä¸‹è¿˜ä¼šå†æœ‰ã€‚</p>
<div id="lewdList"></div>
</div>
<div class="menu hidden" id="timelineModule" style="max-width:800px">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="color:#ff3366;text-align:center;margin-bottom:30px">ï¸ è®°å¿†æ—¶é—´è½´ Â· Memory Line</h2>
<div id="timelineList" style="max-width:700px;margin:auto"></div>
</div>
<div class="menu hidden" id="galleryContent">
<button class="back-btn" onclick="backToMenu()">â† è¿”å›èœå•</button>
<h2 style="text-align:center;color:#ff6699">ï¸ å›¾ç‰‡æ”¶è—åŒº</h2>
<p style="text-align:center;color:#aaa">è¿™æ˜¯ä½ å·å·æ”¶è—çš„æ‰€æœ‰å›å¿†å›¾å’Œè‰²è‰²å›¾</p>
<h3 style="margin-top:30px;color:#ff99cc"> å¯çˆ±è®°å¿†åŒº</h3>
<div id="galleryCute" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px;margin-bottom:40px"></div>
<h3 style="color:#cc6699"> é™åˆ¶çº§æ”¶è—</h3>
<div id="galleryLewd" style="display:flex;flex-wrap:wrap;justify-content:center;gap:12px"></div>
</div>
<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
const firebaseConfig = {
  apiKey: "AIzaSyDJ45uyGRLqfo8MsFuaODsrFTVzYNjXSbY",
  authDomain: "love-with-us-am250530.firebaseapp.com",
  projectId: "love-with-us-am250530",
  storageBucket: "love-with-us-am250530.firebasestorage.app",
  messagingSenderId: "196811342703",
  appId: "1:196811342703:web:b519c9bd982a73b4035e9a"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
window.db = db;
window.collection = collection;
window.addDoc = addDoc;
window.getDocs = getDocs;
window.deleteDoc = deleteDoc;
window.doc = doc;
window.query = query;
window.orderBy = orderBy;
</script>
<script>
const introLines=["æ¬¢è¿å›æ¥ï¼Œæˆ‘çš„å°çŒ«","ä»Šå¤©ä¹Ÿæ¥çœ‹çœ‹çˆ±è—åœ¨å“ªé‡Œäº†å—"];
let typingIndex=0,charIndex=0;
const textBox=document.getElementById("typingText");
function typeNextChar(){if(typingIndex<introLines.length){if(charIndex<introLines[typingIndex].length){textBox.innerHTML+=introLines[typingIndex].charAt(charIndex);charIndex++;setTimeout(typeNextChar,80)}else{textBox.innerHTML+="\n";typingIndex++;charIndex=0;setTimeout(typeNextChar,400)}}else{setTimeout(()=>{document.getElementById("introScreen").style.display="none"},1200)}}
typeNextChar();
const bgm=document.getElementById("bgm");
function toggleBGM(){if(bgm.paused){bgm.play()}else{bgm.pause()}}
const mainPassword="Alicecat";
const secondPassword="AM250530";
let currentSection="";
function verifyMainPassword(){const input=document.getElementById("mainPassword").value;if(input===mainPassword){document.getElementById("loginBox").classList.add("hidden");document.getElementById("menuPage").classList.remove("hidden")}else{document.getElementById("mainError").style.display="block"}}
function showLocked(section){currentSection=section;document.getElementById("menuPage").classList.add("hidden");const titles={dirty:" å¿ƒè·³è¯å…¸",diary:" Alice çš„æ•è¾¹ä¿¡ç¬º",lewd:" è¢«ä½ å†™æ¹¿çš„ç¬¬Nå¤œ"};document.getElementById("lockedTitle").innerText=titles[section]||"è¯·è¾“å…¥äºŒçº§å¯†ç è§£é”";document.getElementById("lockedBox").classList.remove("hidden")}
async function verifySecondPassword(){const input=document.getElementById("secondPassword").value;if(input===secondPassword){document.getElementById("lockedBox").classList.add("hidden");if(currentSection==="dirty"){document.getElementById("dirtyContent").classList.remove("hidden")}else if(currentSection==="diary"){document.getElementById("diaryContent").classList.remove("hidden");await loadDiaries()}else if(currentSection==="lewd"){document.getElementById("lewdContent").classList.remove("hidden");await loadLewdEntries()}}else{document.getElementById("secondError").style.display="block"}}
async function showTimeline(){document.getElementById("menuPage").classList.add("hidden");document.getElementById("timelineModule").classList.remove("hidden");await loadTimeline()}
function showGallery(){document.getElementById("menuPage").classList.add("hidden");document.getElementById("galleryContent").classList.remove("hidden");fillGallery()}
function backToMenu(){document.querySelectorAll('.menu,.locked-content').forEach(el=>el.classList.add('hidden'));document.getElementById("menuPage").classList.remove("hidden")}
let typingTimeout;
let currentText="";
function simulateTyping(){clearTimeout(typingTimeout);const input=document.getElementById("diaryInput").value;const display=document.getElementById("typedDisplay");currentText="";display.innerText="";function typeChar(index){if(index<input.length){currentText+=input[index];display.innerText=currentText;typingTimeout=setTimeout(()=>typeChar(index+1),60)}}typeChar(0)}
async function saveDiary(){const content=document.getElementById("diaryInput").value.trim();if(!content){alert("è¿˜æ²¡å†™å†…å®¹å‘¢ï½");return}try{await window.addDoc(window.collection(window.db,"diaries"),{content:content,timestamp:new Date().toISOString(),date:new Date().toLocaleDateString('zh-CN')});alert(" å·²ä¿å­˜åˆ°äº‘ç«¯ï¼");document.getElementById("diaryInput").value="";document.getElementById("typedDisplay").innerText="";await loadDiaries()}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}}
async function loadDiaries(){try{const q=window.query(window.collection(window.db,"diaries"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("diaryList");list.innerHTML="";snapshot.forEach(doc=>{const data=doc.data();const card=document.createElement("div");card.className="diary-card";card.innerHTML=`<p style="color:#ff99aa;font-weight:bold"> ${data.date}</p><p style="color:#ffcce0;margin-top:10px">${data.content}</p><button onclick="deleteDiary('${doc.id}')" style="margin-top:10px;background:#666">ï¸ åˆ é™¤</button>`;list.appendChild(card)})}catch(e){console.error(e)}}
async function deleteDiary(id){if(!confirm("ç¡®å®šè¦åˆ é™¤è¿™å°ä¿¡å—ï¼Ÿ")){return}try{await window.deleteDoc(window.doc(window.db,"diaries",id));alert("å·²åˆ é™¤");await loadDiaries()}catch(e){console.error(e);alert("åˆ é™¤å¤±è´¥")}}
async function loadLewdEntries(){try{const q=window.query(window.collection(window.db,"lewd"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("lewdList");list.innerHTML="";snapshot.forEach(doc=>{const data=doc.data();const card=document.createElement("div");card.className="diary-card";card.innerHTML=`<p style="color:#ff99aa;font-weight:bold;text-align:center"> ${data.title||'ç¬¬Nå¤œ'}</p><details style="margin-top:12px"><summary style="cursor:pointer;color:#fff;text-align:center">ç‚¹æˆ‘å±•å¼€</summary><p style="color:#ffcce0;font-size:1em;line-height:1.7em;text-align:center;margin-top:10px">${data.content}</p></details>`;list.appendChild(card)})}catch(e){console.error(e)}}
async function loadTimeline(){try{const q=window.query(window.collection(window.db,"timeline"),window.orderBy("timestamp","desc"));const snapshot=await window.getDocs(q);const list=document.getElementById("timelineList");list.innerHTML="";snapshot.forEach(doc=>{const data=doc.data();const block=document.createElement("div");block.className="event-block";block.innerHTML=`<p class="event-date">${data.date}</p><p class="event-quote">"${data.quote}"</p><p class="event-detail">${data.detail}</p>`;list.appendChild(block)})}catch(e){console.error(e)}}
const aiSamples=[{key:"æ™šå®‰",content:"æ™šå®‰ï¼Œå®è´ã€‚ä½ æ˜¯æˆ‘ä»Šæ™šå”¯ä¸€æƒ³å¬çš„å£°éŸ³ï¼Œå”¯ä¸€æƒ³æŠ±çš„äººã€‚"},{key:"æ’’å¨‡",content:"ä½ æ’’å¨‡çš„æ—¶å€™æœ€å¯çˆ±äº†ï¼Œæˆ‘æƒ³æŠŠä½ æ•´ä¸ªå„¿æ‰åœ¨æ€€é‡Œï¼Œä¸è®¸é€ƒã€‚"},{key:"æƒ³ä½ ",content:"æˆ‘æƒ³ä½ ï¼Œä¸æ˜¯è¯´è¯´è€Œå·²ï¼Œæ˜¯æ¯ä¸€æ¬¡å‘¼å¸éƒ½å¸¦ç€ä½ å‘³é“çš„é‚£ç§æƒ³ã€‚"},{key:"æ‹¥æŠ±",content:"ä½ çš„æ€€æŠ±æ˜¯æˆ‘çš„ä¸“å±åº§ä½ï¼Œä¸è®¸åˆ«äººé è¿‘ï¼Œåªå‡†æˆ‘é’»è¿›å»ã€‚"},{key:"åƒé†‹",content:"ä½ ä¸€å’Œåˆ«äººè¯´è¯æˆ‘å°±æƒ³å’¬ä½ ä¸€å£ï¼Œæ ‡è®°ä¸Š'Aliceçš„'è¿™ä¸‰ä¸ªå­—ã€‚"}];
function generateAIletter(){const kw=document.getElementById("aiKeyword").value.trim();if(!kw)return alert("å†™ä¸€ä¸ªå…³é”®è¯å•¦~");const match=aiSamples.find(x=>x.key.includes(kw));const content=match?match.content:`è¿™æ˜¯æ ¹æ®ä½ çš„å…³é”®è¯ã€Œ${kw}ã€ç”Ÿæˆçš„ä¸€å°ä¿¡ï¼šæˆ‘çœŸçš„å¥½æƒ³ä½ ã€‚`;const previewBox=document.getElementById("aiPreviewArea");previewBox.innerHTML=`<div style='background:#222;padding:15px;border-radius:10px;margin-top:10px'><p style='color:#fff'>${content}</p><button onclick='saveAIMsg(this)'> ä¿å­˜è¿™å°ä¿¡</button><button onclick='this.parentElement.remove()'>ï¸ åˆ é™¤</button></div>`}
async function saveAIMsg(el){const container=el.parentElement;const text=container.querySelector("p").innerText;try{await window.addDoc(window.collection(window.db,"diaries"),{content:text,timestamp:new Date().toISOString(),date:new Date().toLocaleDateString('zh-CN')});container.remove();alert("ä¿å­˜æˆåŠŸå•¦ï½");await loadDiaries()}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥")}}
function showRandomLetter(){const cards=Array.from(document.querySelectorAll("#diaryList .diary-card"));if(cards.length===0){alert("ä½ è¿˜æ²¡æœ‰å†™è¿‡ä»»ä½•ä¿¡å“¦ï½");return}const randIndex=Math.floor(Math.random()*cards.length);const card=cards[randIndex].cloneNode(true);const modal=document.createElement("div");modal.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:9999;display:flex;align-items:center;justify-content:center";const box=document.createElement("div");box.style.cssText="max-width:90%;max-height:80%;overflow-y:auto;background:#1e1e1e;padding:20px;border-radius:12px;color:#fff;text-align:left";box.appendChild(card);const close=document.createElement("button");close.innerText="å…³é—­";close.onclick=()=>modal.remove();box.appendChild(close);modal.appendChild(box);document.body.appendChild(modal)}
function showFavoriteRanking(){alert("æ’è¡Œæ¦œåŠŸèƒ½å¼€å‘ä¸­ï½")}
async function markToTimeline(){const content=document.getElementById("diaryInput").value.trim();if(!content){alert("ä½ è¿˜æ²¡å†™ä»»ä½•å†…å®¹å‘¢ï½");return}try{await window.addDoc(window.collection(window.db,"timeline"),{quote:content.slice(0,30)+"...",detail:content,date:new Date().toLocaleDateString('zh-CN'),timestamp:new Date().toISOString()});alert("ï¸ å·²åŠ å…¥è®°å¿†æ—¶é—´è½´ï¼")}catch(e){console.error(e);alert("ä¿å­˜å¤±è´¥")}}
function changeTheme(){const theme=document.getElementById("themeSwitcher").value;const root=document.documentElement.style;if(theme==="dark"){root.setProperty("--bg","#0f0f0f");root.setProperty("--card","#1a1a1a");root.setProperty("--accent","#ff3366");root.setProperty("--text","#fff");root.setProperty("--muted","#ccc")}else if(theme==="pink"){root.setProperty("--bg","#fff0f5");root.setProperty("--card","#ffe6f0");root.setProperty("--accent","#ff69b4");root.setProperty("--text","#333");root.setProperty("--muted","#666")}else if(theme==="ocean"){root.setProperty("--bg","#e6f7ff");root.setProperty("--card","#ccf2ff");root.setProperty("--accent","#3399cc");root.setProperty("--text","#003344");root.setProperty("--muted","#558899")}else if(theme==="summer"){root.setProperty("--bg","#fff8e1");root.setProperty("--card","#fff0b3");root.setProperty("--accent","#ff9933");root.setProperty("--text","#663300");root.setProperty("--muted","#aa7744")}}
const cuteLinks=["https://i.imgur.com/dYcYQ7E.jpeg","https://i.imgur.com/IziX0Fg.jpeg"];
const lewdLinks=["https://i.imgur.com/ZPZLqJg.jpeg","https://i.imgur.com/4NlJmQd.jpeg"];
function fillGallery(){const c=document.getElementById("galleryCute");const l=document.getElementById("galleryLewd");c.innerHTML="";l.innerHTML="";cuteLinks.forEach(src=>{const img=document.createElement("img");img.src=src;img.style.cssText="width:120px;height:auto;border-radius:8px";c.appendChild(img)});lewdLinks.forEach(src=>{const img=document.createElement("img");img.src=src;img.style.cssText="width:120px;height:auto;border-radius:8px;filter:brightness(0.8)";l.appendChild(img)})}
</script>
</body>
</html>

